buildscript {
    repositories {
        mavenCentral()
        jcenter()
    }

    dependencies {
        classpath 'org.gradle.api.plugins:gradle-cargo-plugin:1.2.2'
        classpath 'de.undercouch:gradle-download-task:0.4'
    }
}

apply plugin: 'cargo'

repositories {

    mavenLocal()

//    maven {
//        url "http://localhost:8081/nexus/content/groups/public/"
//    }

    maven {
        url "http://repository.jboss.org/nexus/content/groups/public"
    }
    maven {
        url "https://repository.jboss.org/nexus/content/repositories/thirdparty-releases"
    }
    maven {
        url "https://repository.jboss.org/nexus/content/repositories/thirdparty-uploads"
    }
    maven {
        url "https://repository.jboss.org/nexus/content/repositories/releases/"
    }

    maven{
        url "https://repository.jboss.org/nexus/content/repositories/releases/"
    }

    mavenCentral()
}

dependencies {
    def cargoVersion = '1.4.6'
    cargo("org.codehaus.cargo:cargo-core-uberjar:$cargoVersion"
            , "org.codehaus.cargo:cargo-ant:$cargoVersion"
            , 'org.jboss.as:jboss-as-controller-client:7.1.1.Final'
    )

}

def warDirectory = file("wars")
warDirectory.mkdirs();

task downloadJenkins(type: de.undercouch.gradle.tasks.download.Download) {
    src 'http://mirrors.jenkins-ci.org/war/latest/jenkins.war'
    dest warDirectory
    onlyIfNewer true
}

cargoDeployRemote.dependsOn downloadJenkins

cargo {
    containerId = 'jboss71x'
    port = 9990

    deployable {
        file = file('wars/jenkins.war')
    }

    remote {
        hostname = '192.168.9.92'
        username = 'signed'
        password = 'unsigned'
    }
}

version = '0.0.1'